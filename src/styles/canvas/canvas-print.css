/**
 * Canvas Print Styles
 *
 * Shared print contract for any DungeonMind canvas surface.
 * Ensures only the rendered canvas is visible during browser print/PDF export.
 * 
 * NOTE: Print styles intentionally use !important throughout.
 * @media print must forcefully override screen styles for proper PDF export.
 * This is an accepted exception to the "no !important" rule.
 * 
 * @layer canvas-overrides - Highest priority for print overrides
 */

@layer canvas-overrides {

    @page {
        size: letter portrait;
        margin: 0.25in;
    }

    @media print {
        body {
            background: white !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        body,
        body * {
            visibility: hidden !important;
            overflow: visible !important;
        }

        .generator-canvas-container,
        .generator-canvas-container *,
        .statblock-canvas-area,
        .statblock-canvas-area *,
        .mantine-Card-root,
        .mantine-Card-root *,
        .dm-canvas-responsive,
        .dm-canvas-responsive * {
            visibility: visible !important;
        }

        nav,
        header,
        footer,
        button,
        .no-print,
        .mantine-AppShell-root,
        .mantine-AppShell-navbar,
        .mantine-AppShell-main,
        .mantine-Drawer-root,
        .mantine-Modal-root,
        .mantine-Notification-root,
        .mantine-AppShell-navbar,
        .no-print {
            display: none !important;
            visibility: hidden !important;
        }

        .mantine-AppShell-main,
        .generator-layout,
        .generator-main-content,
        .generator-canvas-container,
        .statblock-canvas-area {
            display: block !important;
            visibility: visible !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        .mantine-AppShell-main {
            padding-top: 0 !important;
        }

        .mantine-Card-root {
            all: unset !important;
            display: block !important;
            visibility: visible !important;
            box-shadow: none !important;
            border: none !important;
            background: transparent !important;
            padding: 0 !important;
            margin: 0 !important;
        }

        .dm-canvas-responsive {
            position: absolute !important;
            top: 0 !important;
            left: 50% !important;
            transform: translateX(-50%) !important;
            width: 8in !important;
            height: auto !important;
            box-sizing: border-box !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        .dm-canvas-wrapper {
            transform: none !important;
            position: static !important;
            width: 100% !important;
            height: auto !important;
        }

        .dm-canvas-renderer {
            box-shadow: none !important;
            border: none !important;
            background: transparent !important;
        }

        .dm-canvas-pages,
        .dm-canvas-pages-content {
            width: 100% !important;
            max-width: 100% !important;
            margin: 0 !important;
            padding: 0 !important;
            overflow: visible !important;
            position: static !important;
        }

        .dm-canvas-pages-content {
            gap: 0 !important;
        }

        .dm-canvas-pages::after,
        .dm-canvas-pages-content::after {
            display: none !important;
            content: none !important;
        }

        .dm-canvas-measurement-layer,
        .dm-canvas-measurement-layer * {
            display: none !important;
            visibility: hidden !important;
            position: absolute !important;
            left: -99999px !important;
            width: 0 !important;
            height: 0 !important;
            overflow: hidden !important;
        }

        .dm-pagination-marker {
            display: none !important;
        }

        .dm-canvas-pages .page,
        .dm-canvas-pages .page.phb,
        .dm-canvas-responsive .page,
        .dm-canvas-responsive .page.phb {
            break-inside: avoid !important;
            page-break-inside: avoid !important;
            width: var(--dm-page-width, 8in) !important;
            max-width: var(--dm-page-width, 8in) !important;
            height: var(--dm-page-height) !important;
            margin: 0 !important;
            padding: var(--dm-page-top-margin, 0) var(--dm-page-right-margin, 0) var(--dm-page-bottom-margin, 0) var(--dm-page-left-margin, 0) !important;
            position: relative !important;
            display: block !important;
            box-sizing: border-box !important;
            overflow: hidden !important;
            background-position: top center !important;
            background-size: cover !important;
        }

        .dm-canvas-responsive .page .columnWrapper,
        .dm-canvas-responsive .page .monster.frame.wide {
            height: 900 !important;
            max-height: 900 !important;
        }

        .dm-canvas-pages .page:first-child {
            break-before: avoid !important;
            page-break-before: avoid !important;
        }

        .dm-canvas-pages .page:not(:first-child) {
            break-before: page !important;
            page-break-before: always !important;
        }

        .dm-canvas-pages .page:last-child {
            break-after: avoid !important;
            page-break-after: avoid !important;
            margin-bottom: 0 !important;
        }

        .dm-canvas-pages .page .columnWrapper,
        .dm-canvas-pages .page .monster,
        .dm-canvas-pages .page .canvas-column {
            break-inside: avoid !important;
            page-break-inside: avoid !important;
        }
    }

}

/* end @layer canvas-overrides */